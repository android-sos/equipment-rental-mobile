angular.module("App.items",[]).controller("itemsCtrl",function(b,d,a){b.count=15;b.start=0;if(a.loggedIn){c()}else{b.view=false}b.$watch("count",function(e){console.log(e);window.localStorage.setItem("product_count",e);c()});b.back=function(){if(b.start-b.count<0){b.viewResults=false}else{b.viewResults=true;b.start=b.start-b.count;c()}};b.forward=function(){if(b.start>=b.products.total-b.count){b.viewResults=false}else{b.viewResults=true;b.start=b.start+b.count;c()}};function c(){d({url:backend+"/p",method:"GET",headers:{Start:b.start,Count:b.count}}).success(function(g,e,h,f){console.log(g);b.products=g}).error(function(g,e,h,f){b.error=true})}}).controller("itemCtrl",function(j,e,f,g,b,i,c){var a=angular.element(document.getElementById("itembackground"));e({url:backend+"/product/"+g.item,method:"GET",headers:{Start:j.start,Count:j.count}}).success(function(k,l,n,m){console.log(k.item[0]);j.product=k.item[0];console.log(data);a.css({"background-image":"url("+data+j.product.image.size.large+")"});h()}).error(function(m,k,n,l){j.error=true});var d=angular.element(document.getElementById("status"));j.showAction=function(){var k=i.show({buttons:[{text:"Twitter"},{text:"Facebook"},{text:"Other"}],titleText:"Share",cancelText:"Cancel",cancel:function(){k()},buttonClicked:function(l){if(l===0){c.shareViaTwitter(j.product.title,data+j.product.image.size.large,"http://lemondev.xyz:8080/#/listing/"+j.product.id).then(function(m){console.log(m)},function(m){})}else{if(l===1){c.shareViaFacebook(j.product.title+"  http://lemondev.xyz:8080/#/listing/"+j.product.id,data+j.product.image.size.large).then(function(m){},function(m){})}else{c.share(j.product.title,j.product.title,data+j.product.image.size.large,"http://lemondev.xyz:8080/#/listing/"+j.product.id).then(function(m){},function(m){})}}return true}})};function h(){}});